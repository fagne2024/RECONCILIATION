<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des Pop-ups Modernes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            display: inline-block;
            margin: 10px;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .test-button.success {
            background: #28a745;
        }
        .test-button.success:hover {
            background: #1e7e34;
        }
        .test-button.warning {
            background: #ffc107;
            color: #212529;
        }
        .test-button.warning:hover {
            background: #e0a800;
        }
        .test-button.error {
            background: #dc3545;
        }
        .test-button.error:hover {
            background: #c82333;
        }
        .test-button.confirm {
            background: #6f42c1;
        }
        .test-button.confirm:hover {
            background: #5a32a3;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test des Pop-ups Modernes</h1>
        
        <div class="test-section">
            <h3>üìã Pop-ups d'Information</h3>
            <button class="test-button" onclick="testInfo()">Test Info Simple</button>
            <button class="test-button" onclick="testInfoWithTitle()">Test Info avec Titre</button>
        </div>

        <div class="test-section">
            <h3>‚úÖ Pop-ups de Succ√®s</h3>
            <button class="test-button success" onclick="testSuccess()">Test Succ√®s</button>
            <button class="test-button success" onclick="testSaveSuccess()">Test Sauvegarde (1 ligne)</button>
            <button class="test-button success" onclick="testSaveSuccessMultiple()">Test Sauvegarde (5 lignes)</button>
        </div>

        <div class="test-section">
            <h3>‚ö†Ô∏è Pop-ups d'Avertissement</h3>
            <button class="test-button warning" onclick="testWarning()">Test Avertissement</button>
            <button class="test-button warning" onclick="testNoData()">Test Aucune Donn√©e</button>
        </div>

        <div class="test-section">
            <h3>‚ùå Pop-ups d'Erreur</h3>
            <button class="test-button error" onclick="testError()">Test Erreur Simple</button>
            <button class="test-button error" onclick="testErrorWithDetails()">Test Erreur avec D√©tails</button>
        </div>

        <div class="test-section">
            <h3>‚ùì Pop-ups de Confirmation</h3>
            <button class="test-button confirm" onclick="testConfirm()">Test Confirmation</button>
            <button class="test-button confirm" onclick="testConfirmDelete()">Test Confirmation Suppression</button>
        </div>
    </div>

    <script>
        // Simulation des m√©thodes du PopupService
        function showModernPopup(config) {
            return new Promise((resolve) => {
                // Cr√©er un √©l√©ment popup dynamiquement
                const popupElement = document.createElement('div');
                popupElement.className = 'modern-popup-overlay';
                popupElement.innerHTML = `
                    <div class="modern-popup">
                        <div class="popup-header">
                            <h3 class="popup-title">${config.title || 'Notification'}</h3>
                            <button class="popup-close" onclick="this.closest('.modern-popup-overlay').remove(); resolve(false);">√ó</button>
                        </div>
                        <div class="popup-content">
                            <p class="popup-message">${config.message}</p>
                            ${config.linesSaved ? `<p class="popup-lines-saved">Lignes sauvegard√©es: ${config.linesSaved}</p>` : ''}
                        </div>
                        <div class="popup-actions">
                            ${config.showCancelButton ? `<button class="popup-btn popup-btn-cancel" onclick="this.closest('.modern-popup-overlay').remove(); resolve(false);">${config.cancelText || 'Annuler'}</button>` : ''}
                            <button class="popup-btn popup-btn-confirm popup-btn-${config.type || 'info'}" onclick="this.closest('.modern-popup-overlay').remove(); resolve(true);">${config.confirmText || 'OK'}</button>
                        </div>
                    </div>
                `;

                // Ajouter les styles CSS
                const style = document.createElement('style');
                style.textContent = `
                    .modern-popup-overlay {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.5);
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        z-index: 9999;
                        animation: fadeIn 0.3s ease-out;
                    }

                    .modern-popup {
                        background: white;
                        border-radius: 12px;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                        max-width: 400px;
                        width: 90%;
                        animation: slideIn 0.3s ease-out;
                    }

                    .popup-header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 20px 20px 0 20px;
                    }

                    .popup-title {
                        margin: 0;
                        font-size: 18px;
                        font-weight: 600;
                        color: #333;
                    }

                    .popup-close {
                        background: none;
                        border: none;
                        font-size: 24px;
                        cursor: pointer;
                        color: #999;
                        padding: 0;
                        width: 30px;
                        height: 30px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 50%;
                        transition: all 0.2s;
                    }

                    .popup-close:hover {
                        background: #f5f5f5;
                        color: #666;
                    }

                    .popup-content {
                        padding: 20px;
                    }

                    .popup-message {
                        margin: 0 0 10px 0;
                        color: #555;
                        line-height: 1.5;
                    }

                    .popup-lines-saved {
                        margin: 0;
                        color: #888;
                        font-size: 14px;
                    }

                    .popup-actions {
                        display: flex;
                        justify-content: flex-end;
                        gap: 10px;
                        padding: 0 20px 20px 20px;
                    }

                    .popup-btn {
                        padding: 10px 20px;
                        border: none;
                        border-radius: 6px;
                        cursor: pointer;
                        font-weight: 500;
                        transition: all 0.2s;
                        min-width: 80px;
                    }

                    .popup-btn-cancel {
                        background: #f5f5f5;
                        color: #666;
                    }

                    .popup-btn-cancel:hover {
                        background: #e5e5e5;
                    }

                    .popup-btn-confirm {
                        color: white;
                    }

                    .popup-btn-info {
                        background: #007bff;
                    }

                    .popup-btn-info:hover {
                        background: #0056b3;
                    }

                    .popup-btn-success {
                        background: #28a745;
                    }

                    .popup-btn-success:hover {
                        background: #1e7e34;
                    }

                    .popup-btn-warning {
                        background: #ffc107;
                        color: #212529;
                    }

                    .popup-btn-warning:hover {
                        background: #e0a800;
                    }

                    .popup-btn-error {
                        background: #dc3545;
                    }

                    .popup-btn-error:hover {
                        background: #c82333;
                    }

                    .popup-btn-confirm {
                        background: #007bff;
                    }

                    .popup-btn-confirm:hover {
                        background: #0056b3;
                    }

                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }

                    @keyframes slideIn {
                        from { 
                            opacity: 0;
                            transform: translateY(-20px) scale(0.95);
                        }
                        to { 
                            opacity: 1;
                            transform: translateY(0) scale(1);
                        }
                    }
                `;

                document.head.appendChild(style);
                document.body.appendChild(popupElement);

                // Emp√™cher le scroll du body
                document.body.style.overflow = 'hidden';

                // Nettoyer les styles apr√®s fermeture
                const cleanup = () => {
                    document.body.style.overflow = 'auto';
                    if (style.parentNode) {
                        style.parentNode.removeChild(style);
                    }
                };

                // Ajouter les event listeners pour la fermeture
                popupElement.addEventListener('click', (e) => {
                    if (e.target === popupElement) {
                        popupElement.remove();
                        cleanup();
                        resolve(false);
                    }
                });

                // G√©rer la fermeture avec Escape
                const handleEscape = (e) => {
                    if (e.key === 'Escape') {
                        popupElement.remove();
                        cleanup();
                        document.removeEventListener('keydown', handleEscape);
                        resolve(false);
                    }
                };
                document.addEventListener('keydown', handleEscape);
            });
        }

        // Fonctions de test
        async function testInfo() {
            await showModernPopup({
                title: 'Information',
                message: 'Ceci est un message d\'information simple.',
                type: 'info'
            });
        }

        async function testInfoWithTitle() {
            await showModernPopup({
                title: 'Titre Personnalis√©',
                message: 'Ceci est un message d\'information avec un titre personnalis√©.',
                type: 'info'
            });
        }

        async function testSuccess() {
            await showModernPopup({
                title: 'Succ√®s',
                message: 'L\'op√©ration a √©t√© effectu√©e avec succ√®s !',
                type: 'success'
            });
        }

        async function testSaveSuccess() {
            await showModernPopup({
                title: 'Sauvegarde',
                message: 'Toutes les s√©lections ont √©t√© sauvegard√©es.',
                type: 'success',
                linesSaved: 1
            });
        }

        async function testSaveSuccessMultiple() {
            await showModernPopup({
                title: 'Sauvegarde',
                message: 'Toutes les s√©lections ont √©t√© sauvegard√©es.',
                type: 'success',
                linesSaved: 5
            });
        }

        async function testWarning() {
            await showModernPopup({
                title: 'Avertissement',
                message: 'Attention, cette action est irr√©versible.',
                type: 'warning'
            });
        }

        async function testNoData() {
            await showModernPopup({
                title: 'Aucune Donn√©e',
                message: '‚ùå Aucune donn√©e √† sauvegarder.',
                type: 'warning'
            });
        }

        async function testError() {
            await showModernPopup({
                title: 'Erreur',
                message: 'Une erreur est survenue lors de l\'op√©ration.',
                type: 'error'
            });
        }

        async function testErrorWithDetails() {
            await showModernPopup({
                title: 'Erreur',
                message: '‚ùå Erreur lors de la sauvegarde : Connexion √† la base de donn√©es √©chou√©e.',
                type: 'error'
            });
        }

        async function testConfirm() {
            const confirmed = await showModernPopup({
                title: 'Confirmation',
                message: '√ätes-vous s√ªr de vouloir continuer ?',
                type: 'confirm',
                showCancelButton: true,
                cancelText: 'Annuler',
                confirmText: 'Confirmer'
            });
            
            if (confirmed) {
                await showModernPopup({
                    title: 'Succ√®s',
                    message: 'Action confirm√©e !',
                    type: 'success'
                });
            } else {
                await showModernPopup({
                    title: 'Annul√©',
                    message: 'Action annul√©e.',
                    type: 'info'
                });
            }
        }

        async function testConfirmDelete() {
            const confirmed = await showModernPopup({
                title: 'Confirmation de Suppression',
                message: '√ätes-vous s√ªr de vouloir supprimer cet √©l√©ment ? Cette action est irr√©versible.',
                type: 'confirm',
                showCancelButton: true,
                cancelText: 'Annuler',
                confirmText: 'Supprimer'
            });
            
            if (confirmed) {
                await showModernPopup({
                    title: 'Supprim√©',
                    message: 'L\'√©l√©ment a √©t√© supprim√© avec succ√®s.',
                    type: 'success'
                });
            }
        }
    </script>
</body>
</html>

<div class="banque-container">
  <div class="banque-header">
    <h1>ğŸ¦ Module BANQUE</h1>
    <p class="banque-description">Gestion des opÃ©rations bancaires et des comptes</p>
  </div>

  <div class="banque-content">
    <div class="banque-section">
      <h2>ğŸ“Š Tableau de Bord Bancaire</h2>
      <div class="banque-stats">
        <div class="stat-card">
          <div class="stat-icon">ğŸ’°</div>
          <div class="stat-info">
            <h3>Solde Total</h3>
            <p class="stat-value">0 FCFA</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“ˆ</div>
          <div class="stat-info">
            <h3>Transactions</h3>
            <p class="stat-value">0</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ›ï¸</div>
          <div class="stat-info">
            <h3>Comptes</h3>
            <p class="stat-value">0</p>
          </div>
        </div>
      </div>
    </div>

    <div class="banque-section">
      <h2>ğŸ”§ FonctionnalitÃ©s</h2>
      <div class="banque-features">
        <div class="feature-card">
          <div class="feature-icon">ğŸ’³</div>
          <h3>Gestion des Comptes</h3>
          <p>CrÃ©er et gÃ©rer les comptes bancaires</p>
        </div>
        <div class="feature-card" (click)="showOperationsTable()">
          <div class="feature-icon">ğŸ’¸</div>
          <h3>OpÃ©rations</h3>
          <p>Effectuer des virements et paiements</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ğŸ“‹</div>
          <h3>Rapports</h3>
          <p>GÃ©nÃ©rer des rapports bancaires</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ğŸ”’</div>
          <h3>SÃ©curitÃ©</h3>
          <p>Gestion des autorisations et sÃ©curitÃ©</p>
        </div>
      </div>
    </div>

    <div class="banque-section">
      <h2>ğŸ“ Informations</h2>
      <div class="banque-info">
        <p>Ce module est en cours de dÃ©veloppement.</p>
        <p>Les fonctionnalitÃ©s bancaires seront bientÃ´t disponibles.</p>
      </div>
    </div>
  </div>

  <!-- Tableau des opÃ©rations bancaires -->
  <div class="banque-section operations-section" *ngIf="showOperations">
    <div class="operations-header">
      <h2>ğŸ“‹ OpÃ©rations Bancaires</h2>
      <button class="btn-back" (click)="hideOperationsTable()">
        <i class="fas fa-arrow-left"></i>
        Retour
      </button>
    </div>

    <div class="operations-table-container">
      <!-- Filtres -->
      <div class="table-filters">
        <div class="filter-group">
          <label>Pays</label>
          <select [(ngModel)]="filters.pays" (change)="applyFilters()">
            <option value="">Tous les pays</option>
            <option *ngFor="let pays of paysList" [value]="pays">{{ pays }}</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Type d'opÃ©ration</label>
          <select [(ngModel)]="filters.typeOperation" (change)="applyFilters()">
            <option value="">Tous les types</option>
            <option *ngFor="let type of typesOperation" [value]="type">{{ type }}</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Statut</label>
          <select [(ngModel)]="filters.statut" (change)="applyFilters()">
            <option value="">Tous les statuts</option>
            <option *ngFor="let statut of statutsList" [value]="statut">{{ statut }}</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Date dÃ©but</label>
          <input type="date" [(ngModel)]="filters.dateDebut" (change)="applyFilters()">
        </div>
        <div class="filter-group">
          <label>Date fin</label>
          <input type="date" [(ngModel)]="filters.dateFin" (change)="applyFilters()">
        </div>
        <button class="btn-clear-filters" (click)="clearFilters()">
          <i class="fas fa-times"></i>
          Effacer
        </button>
      </div>

      <!-- Tableau -->
      <div class="table-container">
        <table class="operations-table">
          <thead>
            <tr>
              <th>Pays</th>
              <th>Code Pays</th>
              <th>Mois</th>
              <th>Date OpÃ©ration</th>
              <th>Agence</th>
              <th>Type OpÃ©ration</th>
              <th>Nom du BÃ©nÃ©ficiaire</th>
              <th>Compte Ã  DÃ©biter</th>
              <th>Montant</th>
              <th>Mode de Paiement</th>
              <th>RÃ©fÃ©rence</th>
              <th>ID GLPI</th>
              <th>BO</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let operation of pagedOperations">
              <td>{{ operation.pays }}</td>
              <td>{{ operation.codePays }}</td>
              <td>{{ operation.mois }}</td>
              <td>{{ operation.dateOperation | date:'dd/MM/yyyy' }}</td>
              <td>{{ operation.agence }}</td>
              <td>
                <span class="badge type-{{ operation.typeOperation.toLowerCase() }}">
                  {{ operation.typeOperation }}
                </span>
              </td>
              <td>{{ operation.nomBeneficiaire }}</td>
              <td>{{ operation.compteADebiter }}</td>
              <td>{{ operation.montant | currency:'XAF':'symbol':'1.0-0' }}</td>
              <td>{{ operation.modePaiement }}</td>
              <td>{{ operation.reference }}</td>
              <td>{{ operation.idGlpi }}</td>
              <td>{{ operation.bo }}</td>
              <td>
                <span class="badge status-{{ operation.statut.toLowerCase() }}">
                  {{ operation.statut }}
                </span>
              </td>
              <td class="actions">
                <button class="btn-icon" (click)="viewOperation(operation)" title="Voir">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn-icon" (click)="editOperation(operation)" title="Modifier">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon btn-danger" (click)="deleteOperation(operation.id)" title="Supprimer">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination" *ngIf="totalPages > 1">
        <button (click)="prevPage()" [disabled]="currentPage === 1">
          <i class="fas fa-chevron-left"></i> PrÃ©cÃ©dent
        </button>
        
        <div class="pagination-indicators">
          <span *ngFor="let page of getVisiblePages()" 
                class="page-indicator"
                [class.active]="currentPage === page"
                (click)="goToPage(page)">
            {{ page }}
          </span>
        </div>
        
        <button (click)="nextPage()" [disabled]="currentPage === totalPages">
          Suivant <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
</div> 